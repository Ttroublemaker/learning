# 常见的 web 前端攻击方式有哪些，如何预防

- xss
  Cross Site Script 跨站脚本攻击
  手段：黑客将 js 代码插入到网页内容中，渲染时执行 js 代码
  预防：特殊字符替换
  ![xss攻击](./assets/xss%E6%94%BB%E5%87%BB.png)
  vue: v-html; react: dangerouslySetInnerHtml 时注意 xss 攻击

- csrf
  Cross Site request Forgery 跨站请求伪造
  手段：黑客诱导用户去访问另一个网站的接口，伪造请求
  预防： 严格控制跨域 + 验证码机制，设置 sameSite，禁止跨域传递 cookie

  流程：
  跨站请求攻击，简单地说，是攻击者通过一些技术手段欺骗用户的浏览器去访问一个自己曾经认证过的网站并运行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去运行。这利用了 web 中用户身份验证的一个漏洞：简单的身份验证只能保证请求发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的。

  攻击过程如下：

  1. 用户 C 打开浏览器，访问受信任网站 A，输入用户名和密码请求登录网站 A；
  2. 在用户信息通过验证后，网站 A 产生 Cookie 信息并返回给浏览器，此时用户登录网站 A 成功，可以正常发送请求到网站 A；
  3. 用户未退出网站 A 之前，在同一浏览器中，打开一个 TAB 页访问网站 B；
  4. 网站 B 接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点 A；
  5. 浏览器在接收到这些攻击性代码后，根据网站 B 的请求，在用户不知情的情况下携带 Cookie 信息，向网站 A 发出请求。网站 A 并不知道该请求其实是由 B 发起的，所以会根据用户 C 的 Cookie 信息以 C 的权限处理该请求，导致来自网站 B 的恶意代码被执行。

- 点击劫持
  [Click Jacking](./assets/%E7%82%B9%E5%87%BB%E5%8A%AB%E6%8C%81.png)
  手段：诱导界面上蒙一个透明的 iframe，诱导用户点击
  预防： 让 iframe 不能跨域加载

  ```js
  if (top.location.hostname !== self.location.hostname) {
    console.warn('您正在访问不安全的网站，即将调整到安全页面');
    top.location.href = self.location.hostname;
  }
  ```

- DDos
  分布式拒绝服务
  手段：分布式的、大规模的流量访问，使服务器瘫痪
  预防：软件层不好做，需要硬件预防（如阿里云 WAF）

- SQL 注入
  手段：黑客提交内容时写入 SQL，破坏数据库
  预防：处理输入的内容，替换特殊字符

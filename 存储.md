# 存储

### cookie

cookie 本身不是用来做服务器端存储的，它是设计用来在服务器和客户端进行信息传递的，因此我们的每个 HTTP 请求都带着 cookie。但是 cookie 也具备浏览器端存储的能力（例如记住用户名和密码）

使用：document.cookie = "key=value" 即可。相同 key 时为覆盖，不同 key 时追加

**但是 cookie 有它致命的缺点：**

存储量太小，只有 4KB  
所有 HTTP 请求都带着，会影响获取资源的效率  
API 简单，需要封装才能用

对于 cookie，我们还需要注意安全性

| 属性      | 作用                                                           |
| --------- | :------------------------------------------------------------- |
| value     | 如果用于保存用户登录态，应该将该值加密，不能使用明文的用户标识 |
| http-only | 不能通过 JS 访问 Cookie，减少 XSS 攻击                         |
| secure    | 只能在协议为 HTTPS 的请求中携带                                |
| same-site | 规定浏览器不能在跨域请求中携带 Cookie，减少 CSRF 攻击          |

### cookie 和 localSrorage、sessionStorage 的区别

| 特性         | cookie                                     | localStorage             | sessionStorage |
| ------------ | :----------------------------------------- | :----------------------- | :------------- |
| 数据生命周期 | 一般由服务器生成，可以设置过期时间         | 除非被清理，否则一直存在 | 页面关闭就清理 |
| 数据存储大小 | 4K                                         | 5M                       | 5M             |
| 与服务端通信 | 每次都会携带在 header 中，对于请求性能影响 | 不参与                   | 不参与         |
